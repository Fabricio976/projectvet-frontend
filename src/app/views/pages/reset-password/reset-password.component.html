<main class="form-signin w-100 m-auto">
  <form [formGroup]="resetForm" (ngSubmit)="onSubmit()">
    <!-- Ícone de cadeado -->
    <div class="text-center mb-3">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="60"
        height="60"
        fill="currentColor"
        class="bi bi-lock-fill"
        viewBox="0 0 16 16"
      >
        <path
          d="M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2m3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z"
        />
      </svg>
    </div>

    <div class="mt-3 text-center">
      <div *ngIf="successMessage" class="alert alert-success fade-out">
        {{ successMessage }}
      </div>
      <div *ngIf="errorMessage" class="alert alert-danger">
        {{ errorMessage }}
      </div>
    </div>
    <h1 class="h3 mb-3 fw-normal text-center">Redefinir Senha</h1>
    <div class="form-floating mb-3">
      <input
        type="password"
        class="form-control"
        id="floatingNewPassword"
        placeholder="Nova senha"
        formControlName="newPassword"
        [ngClass]="{
          'is-invalid':
            resetForm.get('newPassword')?.touched &&
            resetForm.get('newPassword')?.invalid
        }"
      />
      <label for="floatingNewPassword">Nova senha</label>
      <div
        class="invalid-feedback"
        *ngIf="
          resetForm.get('newPassword')?.touched &&
          resetForm.get('newPassword')?.hasError('required')
        "
      >
        Nova senha é obrigatória.
      </div>
    </div>

    <div class="form-floating mb-3">
      <input
        type="password"
        class="form-control"
        id="floatingConfirmPassword"
        placeholder="Confirme a senha"
        formControlName="confirmPassword"
        [ngClass]="{
          'is-invalid':
            resetForm.get('confirmPassword')?.touched &&
            (resetForm.get('confirmPassword')?.invalid ||
              resetForm.hasError('mismatch'))
        }"
      />
      <label for="floatingConfirmPassword">Confirme a senha</label>
      <div
        class="invalid-feedback"
        *ngIf="
          resetForm.get('confirmPassword')?.touched &&
          resetForm.get('confirmPassword')?.hasError('required')
        "
      >
        Confirmação é obrigatória.
      </div>
      <div
        class="invalid-feedback"
        *ngIf="
          resetForm.get('confirmPassword')?.touched &&
          resetForm.hasError('mismatch')
        "
      >
        As senhas não coincidem.
      </div>
    </div>

    <button
      class="btn btn-primary w-100 py-2"
      type="submit"
      [disabled]="resetForm.invalid"
    >
      Redefinir senha
    </button>

    <p class="mt-5 mb-3 text-body-secondary text-center">Projeto Vet – 2025</p>
  </form>
</main>
